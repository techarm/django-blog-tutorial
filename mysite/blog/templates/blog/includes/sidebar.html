<div class="sidebar-section">
    <h3>カテゴリー</h3>
    <ul class="category-list">
        {% for category in categories %}
        <li>
            <a href="{% url 'category_posts' slug=category.slug %}">
                {{ category.name }}
            </a>
            <span class="post-count">({{ category.posts.count }})</span>
        </li>
        {% empty %}
        <li>カテゴリーがありません</li>
        {% endfor %}
    </ul>
</div>

<div class="sidebar-section">
    <h3>最近の投稿</h3>
    <ul class="recent-posts">
        {% for post in recent_posts|default:posts|slice:":3" %}
        <li>
            <a href="{% url 'post_detail' post_id=post.id %}">
                {{ post.title|truncatechars:30 }}
            </a>
        </li>
        {% endfor %}
    </ul>
</div>

<!-- 既存のカテゴリーセクションの後に追加 -->
<div class="sidebar-section">
    <h3>アーカイブ</h3>
    <ul class="archive-list">
        {% for archive in archives %}
        <li>
            <a href="{% url 'archive_month' year=archive.month.year month=archive.month.month %}">
                {{ archive.month|date:"Y年n月" }}
            </a>
            <span class="post-count">({{ archive.count }})</span>
        </li>
        {% empty %}
        <li>アーカイブがありません</li>
        {% endfor %}
    </ul>
</div>